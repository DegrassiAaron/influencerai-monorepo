# Dockerfile for Knowledge Graph (Qdrant) MCP Server
FROM node:20-alpine

WORKDIR /app

# Install build dependencies for native modules
RUN apk add --no-cache python3 make g++ git

# Install the Qdrant Knowledge Graph MCP server
RUN npm install -g @delorenj/mcp-qdrant-memory

# Use existing node user (UID/GID 1000)
RUN mkdir -p /data /tmp && \
    chown -R node:node /data /tmp

USER node

# The server will be started via docker-compose command
CMD ["npx", "-y", "@delorenj/mcp-qdrant-memory"]
